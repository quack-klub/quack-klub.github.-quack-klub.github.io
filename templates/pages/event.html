{% extends "base.html" %}

{% block head %}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="og:type" content="article">

  {% if page.extra.image.path %}
    <meta name="og:image" content="{{ get_url(path=page.extra.image.path) }}">
    <meta name="twitter:image" content="{{ get_url(path=page.extra.image.path) }}">

    {% if page.extra.image.alt %}
      <meta name="og:image:alt" content="{{ page.extra.image.alt }}">
      <meta name="twitter:image:alt" content="{{ page.extra.image.alt }}">
    {% endif %}
  {% endif %}

  <link
    rel="stylesheet"
    type="text/css"
    media="screen"
    href="{{ get_url(path="pages/event.css") }}" />
{% endblock head %}

{% block content %}

<div class="content">
{% if page.title %}
<div class="title-block pulse">
  <h1 class="title">{{ page.title }}</h1>

  {% if page.description %}
  <h2 class="subtitle">{{ page.description }}</h2>
  {% endif %}
</div>
{% endif %}

<section class="event-content">

  <table>
    <tbody>
      <tr>
        <th scope="row"><span class="symbol" aria-hidden="true">event</span>Datum</th>
        <td><time datetime="{{ page.date }}">{{ page.date | date(format="%-d. %B %Y", locale="de_AT") }}</time></td>
      </tr>
      {% if "T" in page.date %}
      <tr>
        <th scope="row"><span class="symbol" aria-hidden="true">schedule</span>Uhrzeit</th>
        <td>
          <time datetime="{{ page.date }}">{{ page.date | date(format="%H:%M", locale="de_AT") }}</time>
          {%- if page.extra.end_date and "T" in page.extra.end_date -%}
            &ndash;<time datetime="{{ page.extra.end_date }}">{{ page.extra.end_date | date(format="%H:%M", locale="de_AT") }}</time>
          {%- endif -%}
        </td>
      </tr>
      {% endif %}
      {% if page.extra.location %}
      <tr>
        <th scope="row"><span class="symbol" aira-hidden="true">map</span>Ort</th>
        <td>{{ page.extra.location | safe }}</td>
      </tr>
      {% endif %}
    </tbody>
  </table>

  <div aria-hidden="true" class="spacer"></div>

  {{ page.content | safe }}

  {% if page.extra.image and page.extra.image.path %}
    <div aria-hidden="true" class="spacer"></div>

    {% if page.extra.image.alt %}
      <img
        alt="{{ page.extra.image.alt }}"
        src="{{ page.extra.image.path | safe }}"
      >

      {% if event.extra.image.description %}
        <span class="sr-only-focusable">Bildbeschreibung: {{ event.extra.image.description }}</span>
      {% endif %}
    {% else %}
      <p style="color: var(--error)">{{ "No alt text provided! Please specify `extra.image-alt`" | markdown(inline=true) | safe }}</p>
    {% endif %}

  {% endif %}

</section>
</div>

{% endblock content %}
